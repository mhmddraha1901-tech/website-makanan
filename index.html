<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sajian Rasa - Pesan via WhatsApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .cart-bounce { animation: bounce 0.4s ease-in-out; }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="bg-green-600 p-2 rounded-lg">
                    <i class="fas fa-store text-white text-lg"></i>
                </div>
                <span class="text-xl font-bold text-gray-800">SajianRasa</span>
            </div>
            <div class="relative bg-gray-100 p-2 rounded-full px-4 flex items-center space-x-2">
                <i class="fas fa-shopping-cart text-green-600"></i>
                <span id="cart-count" class="font-bold text-green-700">0</span>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-gradient-to-r from-green-600 to-green-500 py-10 px-4 text-center text-white">
        <h1 class="text-3xl md:text-4xl font-bold mb-2">Menu Favorit Anda</h1>
        <p class="text-white/80">Pilih makanan dan klik pesan untuk kirim via WhatsApp</p>
    </header>

    <main class="container mx-auto px-4 py-8 flex flex-col lg:flex-row gap-8">
        
        <!-- Bagian Menu -->
        <div class="lg:w-2/3">
            <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Item menu akan muncul di sini -->
            </div>
        </div>

        <!-- Bagian Keranjang -->
        <div class="lg:w-1/3">
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sticky top-24">
                <h2 class="text-xl font-bold mb-4 flex items-center text-gray-700 border-b pb-3">
                    <i class="fab fa-whatsapp mr-2 text-green-500 text-2xl"></i> Rincian Pesanan
                </h2>
                
                <div id="cart-items" class="space-y-4 max-h-[350px] overflow-y-auto mb-6 pr-2">
                    <div class="text-center py-10 text-gray-400 italic">
                        Belum ada item yang dipilih
                    </div>
                </div>

                <div class="space-y-4 border-t pt-4">
                    <div class="flex justify-between items-center text-lg font-bold">
                        <span>Total Bayar:</span>
                        <span id="cart-total" class="text-green-600">Rp 0</span>
                    </div>

                    <div id="checkout-form" class="hidden space-y-3">
                        <hr class="my-4">
                        <label class="block text-sm font-medium text-gray-700">Informasi Pemesan:</label>
                        <input type="text" id="cust-name" placeholder="Nama Lengkap" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all">
                        <textarea id="cust-address" placeholder="Alamat Pengiriman Lengkap" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none h-24 transition-all"></textarea>
                    </div>

                    <button id="btn-checkout" onclick="sendToWhatsApp()" class="w-full bg-green-600 text-white py-4 rounded-2xl font-bold text-lg hover:bg-green-700 transition-all shadow-lg flex items-center justify-center space-x-3 disabled:bg-gray-200 disabled:text-gray-400 disabled:shadow-none" disabled>
                        <i class="fab fa-whatsapp text-2xl"></i>
                        <span>Pesan Sekarang</span>
                    </button>
                    <p class="text-[10px] text-center text-gray-400 uppercase tracking-widest">Akan diarahkan otomatis ke WhatsApp</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        /**
         * PENGATURAN NOMOR WHATSAPP
         * Ganti nomor di bawah ini dengan nomor Anda.
         * Gunakan format kode negara (62 untuk Indonesia) diikuti nomor HP.
         * Contoh: 628123456789 (Tanpa spasi, tanpa tanda +)
         */
        const WHATSAPP_NUMBER = "6282197733923"; 

        const menuData = [
            { id: 1, name: 'Nasi Goreng Spesial', price: 25000, img: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?auto=format&fit=crop&w=400&q=80' },
            { id: 2, name: 'Mie Ayam Bakso', price: 20000, img: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?auto=format&fit=crop&w=400&q=80' },
            { id: 3, name: 'Ayam Goreng Kalasan', price: 28000, img: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?auto=format&fit=crop&w=400&q=80' },
            { id: 4, name: 'Sate Ayam Madura', price: 22000, img: 'https://images.unsplash.com/photo-1529692236671-f1f6cf9683ba?auto=format&fit=crop&w=400&q=80' },
            { id: 5, name: 'Es Teh Manis Jumbo', price: 5000, img: 'https://images.unsplash.com/photo-1556679343-c7306c1976bc?auto=format&fit=crop&w=400&q=80' },
            { id: 6, name: 'Es Jeruk Peras', price: 7000, img: 'https://images.unsplash.com/photo-1551024709-8f23befc6f87?auto=format&fit=crop&w=400&q=80' }
        ];

        let cart = [];

        function renderMenu() {
            const grid = document.getElementById('menu-grid');
            grid.innerHTML = menuData.map(item => `
                <div class="bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-xl transition-all border border-gray-100 group">
                    <div class="relative h-44 overflow-hidden">
                        <img src="${item.img}" alt="${item.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                        <div class="absolute bottom-3 left-3 bg-white/90 backdrop-blur px-3 py-1 rounded-full font-bold text-green-700 shadow-sm text-sm">
                            Rp ${item.price.toLocaleString('id-ID')}
                        </div>
                    </div>
                    <div class="p-5 flex flex-col justify-between">
                        <h3 class="font-bold text-gray-800 mb-4">${item.name}</h3>
                        <button onclick="addToCart(${item.id})" class="w-full bg-gray-900 text-white py-2.5 rounded-xl font-semibold hover:bg-green-600 transition-colors flex items-center justify-center space-x-2">
                            <i class="fas fa-plus-circle"></i>
                            <span>Tambah</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(id) {
            const item = menuData.find(i => i.id === id);
            const exists = cart.find(c => c.id === id);

            if (exists) {
                exists.qty++;
            } else {
                cart.push({ ...item, qty: 1 });
            }

            updateUI();
            
            // Animasi keranjang
            const countContainer = document.getElementById('cart-count').parentElement;
            countContainer.classList.add('cart-bounce');
            setTimeout(() => countContainer.classList.remove('cart-bounce'), 400);
        }

        function updateQty(id, delta) {
            const item = cart.find(c => c.id === id);
            if (!item) return;

            item.qty += delta;
            if (item.qty <= 0) {
                cart = cart.filter(c => c.id !== id);
            }
            updateUI();
        }

        function updateUI() {
            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            const countEl = document.getElementById('cart-count');
            const btn = document.getElementById('btn-checkout');
            const form = document.getElementById('checkout-form');

            if (cart.length === 0) {
                container.innerHTML = `<div class="text-center py-10 text-gray-400 italic">Belum ada item yang dipilih</div>`;
                totalEl.textContent = 'Rp 0';
                countEl.textContent = '0';
                btn.disabled = true;
                form.classList.add('hidden');
                return;
            }

            btn.disabled = false;
            form.classList.remove('hidden');

            let total = 0;
            let count = 0;

            container.innerHTML = cart.map(item => {
                total += (item.price * item.qty);
                count += item.qty;
                return `
                    <div class="flex items-center justify-between bg-gray-50 p-3 rounded-2xl border border-gray-100">
                        <div class="flex-1">
                            <h4 class="text-sm font-bold text-gray-800">${item.name}</h4>
                            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Rp ${item.price.toLocaleString('id-ID')}</p>
                        </div>
                        <div class="flex items-center bg-white rounded-xl border p-1">
                            <button onclick="updateQty(${item.id}, -1)" class="w-7 h-7 flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors">
                                <i class="fas fa-minus-circle"></i>
                            </button>
                            <span class="text-sm font-bold w-6 text-center">${item.qty}</span>
                            <button onclick="updateQty(${item.id}, 1)" class="w-7 h-7 flex items-center justify-center text-gray-400 hover:text-green-500 transition-colors">
                                <i class="fas fa-plus-circle"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            totalEl.textContent = `Rp ${total.toLocaleString('id-ID')}`;
            countEl.textContent = count;
        }

        function sendToWhatsApp() {
            const name = document.getElementById('cust-name').value.trim();
            const address = document.getElementById('cust-address').value.trim();

            if (!name || !address) {
                alert("Mohon lengkapi Nama dan Alamat Anda.");
                return;
            }

            let orderText = cart.map(item => `â€¢ ${item.name} (${item.qty}x)`).join('%0A');
            let total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);

            let message = `*PESANAN BARU - SAJIAN RASA*%0A%0A`;
            message += `*Nama:* ${name}%0A`;
            message += `*Alamat:* ${address}%0A%0A`;
            message += `*Menu Pesanan:*%0A${orderText}%0A%0A`;
            message += `*Total Bayar:* Rp ${total.toLocaleString('id-ID')}%0A%0A`;
            message += `_Mohon segera diproses ya!_`;

            const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${message}`;
            window.open(url, '_blank');

            // Reset setelah kirim
            cart = [];
            document.getElementById('cust-name').value = "";
            document.getElementById('cust-address').value = "";
            updateUI();
        }

        window.onload = renderMenu;
    </script>
</body>
</html>